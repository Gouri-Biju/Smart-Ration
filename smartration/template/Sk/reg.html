{% include 'publicheader.html' %}
<br><br><br>

<!-- Shop Registration Section -->
<section id="contact" class="contact section">
  <div class="container section-title text-center" data-aos="fade-up">
    <h2>Shop Registration</h2>
  </div>

  <div class="container d-flex justify-content-center" data-aos="fade-up" data-aos-delay="100">
    <div class="col-lg-8 col-md-10">
      <div class="contact-form-wrapper bg-light p-4 rounded shadow">
        <form method="post" action="{% url 'reg' %}" id="shop-form">
          {% csrf_token %}

          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="fname" class="form-label">First Name</label>
              <input type="text" name="fname" class="form-control" id="fname" placeholder="Enter first name" required>
            </div>

            <div class="col-md-6 mb-3">
              <label for="lname" class="form-label">Last Name</label>
              <input type="text" name="lname" class="form-control" id="lname" placeholder="Enter last name" required>
            </div>

            <div class="col-md-6 mb-3">
              <label for="shop" class="form-label">Shop Name</label>
              <input type="text" name="shop" class="form-control" id="shop" placeholder="Enter shop name" required>
            </div>

            <div class="col-md-6 mb-3">
              <label for="place" class="form-label">Place</label>
              <input type="text" name="place" class="form-control" id="place" placeholder="Enter place" required>
            </div>

            <div class="col-md-6 mb-3">
              <label for="phone" class="form-label">Phone Number</label>
              <input type="tel" name="phone" class="form-control" id="phone" placeholder="Enter 10-digit phone number" required>
            </div>

            <div class="col-md-6 mb-3">
              <label for="email" class="form-label">Email Address</label>
              <input type="email" name="email" class="form-control" id="email" placeholder="Enter email address" required>
            </div>

            <div class="col-md-6 mb-3">
              <label for="username" class="form-label">Username</label>
              <input type="text" name="username" class="form-control" id="username" placeholder="Choose a username" required>
            </div>

            <div class="col-md-6 mb-4">
              <label for="password" class="form-label">Password</label>
              <input type="password" name="password" class="form-control" id="password" placeholder="Choose a password" required>
              <small id="passwordHelp" class="form-text text-muted">
                Must be at least 8 characters, with uppercase, lowercase, number, and special character.
              </small>
            </div>
          </div>

          <div class="text-center">
            <input type="submit" name="submit" value="Register Shop"
              style="background-color: rgb(192, 141, 33); color: black; border: none; padding: 10px 30px; border-radius: 50px; font-weight: bold; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: 0.3s;">
          </div>
        </form>
      </div>
    </div>
  </div>
</section>

<!-- JavaScript Validation -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("shop-form");

    form.addEventListener("submit", function (e) {
      const fname = document.getElementById("fname").value.trim();
      const lname = document.getElementById("lname").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const password = document.getElementById("password").value;

      const nameRegex = /^[A-Za-z\s]+$/;
      const phoneRegex = /^\d{10}$/;
      const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,}$/;

      // First name validation
      if (!nameRegex.test(fname)) {
        e.preventDefault();
        alert("First name must not contain numbers or special characters.");
        document.getElementById("fname").focus();
        return;
      }

      // Last name validation
      if (!nameRegex.test(lname)) {
        e.preventDefault();
        alert("Last name must not contain numbers or special characters.");
        document.getElementById("lname").focus();
        return;
      }

      // Phone number validation
      if (!phoneRegex.test(phone)) {
        e.preventDefault();
        alert("Phone number must be exactly 10 digits.");
        document.getElementById("phone").focus();
        return;
      }

      // Password validation
      if (!passwordRegex.test(password)) {
        e.preventDefault();
        alert("Password must be at least 8 characters and include:\n- One uppercase letter\n- One lowercase letter\n- One number\n- One special character.");
        document.getElementById("password").focus();
        return;
      }
    });
  });
</script>

{% include 'footer.html' %}
